{"ast":null,"code":"import _objectSpread from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";//@ts-ignore\nimport canAutoplay from'can-autoplay';import{v4 as uuidv4}from'uuid';import md5 from'blueimp-md5';import{XMLParser}from'fast-xml-parser';export function formatTimestamp(input){if(input===null||input===undefined||input===false||Number.isNaN(input)||input===Infinity){return'';}var hours=Math.floor(Number(input)/3600);var minutes=(Math.floor(Number(input)/60)%60).toString().padStart(2,'0');var seconds=Math.floor(Number(input)%60).toString().padStart(2,'0');return\"\".concat(hours?\"\".concat(hours,\":\"):'').concat(minutes,\":\").concat(seconds);}export function formatUnixTime(input){try{if(Number(input)>=Number.MAX_SAFE_INTEGER){return'live';}return new Date(Number(input)*1000).toISOString();}catch(_unused){return input;}}export function formatSpeed(input){if(input>=1000000){return(input/1000000).toFixed(2)+' MB/s';}if(input>=1000){return(input/1000).toFixed(0)+' KB/s';}return input+' B/s';}export function formatSize(input){if(input>=1000000000){return(input/1000000000).toFixed(2)+' GB';}if(input>=1000000){return(input/1000000).toFixed(2)+' MB';}if(input>=1000){return(input/1000).toFixed(0)+' KB';}return input+' B';}export function hashString(input){var hash=0;for(var i=0;i<input.length;i++){var charCode=input.charCodeAt(i);hash+=charCode;}return hash;}export var colorMappings={red:'B03060',orange:'FE9A76',yellow:'FFD700',olive:'32CD32',green:'016936',teal:'008080',blue:'0E6EB8',violet:'EE82EE',purple:'B413EC',pink:'FF1493',brown:'A52A2A',grey:'A0A0A0',black:'000000'};var colorCache={};export function getColorForString(id){var colors=['red','orange','yellow','olive','green','teal','blue','violet','purple','pink','brown','grey'];if(colorCache[id]){return colors[colorCache[id]];}colorCache[id]=Math.abs(hashString(id))%colors.length;return colors[colorCache[id]];}export function getColorForStringHex(id){return colorMappings[getColorForString(id)];}export var getFbPhoto=function getFbPhoto(fbId){return\"https://graph.facebook.com/\".concat(fbId,\"/picture?type=normal\");};export var isYouTube=function isYouTube(input){return input.startsWith('https://www.youtube.com/')||input.startsWith('https://youtu.be/');};export var isHttp=function isHttp(input){return input.startsWith('http');};export var isMagnet=function isMagnet(input){return input.startsWith('magnet:');};export var isHls=function isHls(input){return input.includes('.m3u8');};export var isScreenShare=function isScreenShare(input){return input.startsWith('screenshare://');};export var isFileShare=function isFileShare(input){return input.startsWith('fileshare://');};export var isVBrowser=function isVBrowser(input){return input.startsWith('vbrowser://');};export function testAutoplay(){return _testAutoplay.apply(this,arguments);}function _testAutoplay(){_testAutoplay=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return canAutoplay.video();case 2:result=_context.sent;return _context.abrupt(\"return\",result.result);case 4:case\"end\":return _context.stop();}}},_callee);}));return _testAutoplay.apply(this,arguments);}export function decodeEntities(input){var doc=new DOMParser().parseFromString(input,'text/html');return doc.documentElement.textContent;}// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport function debounce(func,wait,immediate){var timeout;// This is the function that is actually executed when\n// the DOM event is triggered.\nreturn function executedFunction(){// Store the context of this and any\n// parameters passed to executedFunction\n//@ts-ignore\nvar context=this;var args=arguments;// The function to be called after\n// the debounce time has elapsed\nvar later=function later(){// null timeout to indicate the debounce ended\ntimeout=null;// Call function now if you did not on the leading end\nif(!immediate)func.apply(context,args);};// Determine if you should call the function\n// on the leading or trail end\nvar callNow=immediate&&!timeout;// This will reset the waiting every function execution.\n// This is the step that prevents the function from\n// being executed because it will never reach the\n// inside of the previous setTimeout\nclearTimeout(timeout);// Restart the debounce waiting period.\n// setTimeout returns a truthy value (it differs in web vs node)\ntimeout=setTimeout(later,wait);// Call immediately if you're dong a leading\n// end execution\nif(callNow)func.apply(context,args);};}export var getDefaultPicture=function getDefaultPicture(name){var background=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'a0a0a0';return\"https://ui-avatars.com/api/?name=\".concat(name,\"&background=\").concat(background,\"&size=256&color=ffffff\");};export var isMobile=function isMobile(){return window.screen.width<=600;};export function shuffle(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*i);var temp=array[i];array[i]=array[j];array[j]=temp;}}export var iceServers=function iceServers(){return[{urls:'stun:stun.l.google.com:19302'},{urls:'turn:5.161.49.183:3478',username:'username',credential:'password'},{urls:'turn:135.181.147.65:3478',username:'username',credential:'password'},{urls:'turn:numb.viagenie.ca',credential:'watchparty',username:'howardzchung@gmail.com'}];};export var serverPath=process.env.REACT_APP_SERVER_HOST||\"\".concat(window.location.protocol,\"//\").concat(process.env.NODE_ENV==='production'?window.location.host:\"\".concat(window.location.hostname,\":8080\"));export function getMediaPathResults(_x,_x2){return _getMediaPathResults.apply(this,arguments);}function _getMediaPathResults(){_getMediaPathResults=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(mediaPath,query){var response,results,xml,parser,data,filtered,_data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return window.fetch(mediaPath);case 2:response=_context2.sent;results=[];if(!mediaPath.includes('s3.')){_context2.next=14;break;}_context2.next=7;return response.text();case 7:xml=_context2.sent;parser=new XMLParser();data=parser.parse(xml);filtered=data.ListBucketResult.Contents.filter(// Exclude subdirectories\nfunction(file){return!file.Key.includes('/');});results=filtered.map(function(file){return{url:mediaPath+'/'+file.Key,name:mediaPath+'/'+file.Key};});_context2.next=18;break;case 14:_context2.next=16;return response.json();case 16:_data=_context2.sent;results=_data.filter(function(file){return file.type==='file';}).map(function(file){return{url:mediaPath+'/'+file.name,name:mediaPath+'/'+file.name};});case 18:results=results.filter(function(option){return(// Exclude subtitles\n!option.url.endsWith('.srt')&&option.name.toLowerCase().includes(query.toLowerCase()));});return _context2.abrupt(\"return\",results);case 20:case\"end\":return _context2.stop();}}},_callee2);}));return _getMediaPathResults.apply(this,arguments);}export function getStreamPathResults(_x3,_x4){return _getStreamPathResults.apply(this,arguments);}function _getStreamPathResults(){_getStreamPathResults=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(streamPath,query){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return window.fetch(streamPath+\"/\".concat(query?'search':'top',\"?q=\")+encodeURIComponent(query));case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:data=_context3.sent;return _context3.abrupt(\"return\",data);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return _getStreamPathResults.apply(this,arguments);}export function getYouTubeResults(_x5){return _getYouTubeResults.apply(this,arguments);}function _getYouTubeResults(){_getYouTubeResults=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(query){var response,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return window.fetch(serverPath+'/youtube?q='+encodeURIComponent(query));case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:data=_context4.sent;return _context4.abrupt(\"return\",data.map(function(d){return _objectSpread(_objectSpread({},d),{},{type:'youtube'});}));case 7:case\"end\":return _context4.stop();}}},_callee4);}));return _getYouTubeResults.apply(this,arguments);}export function openFileSelector(_x6){return _openFileSelector.apply(this,arguments);}function _openFileSelector(){_openFileSelector=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(accept){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt(\"return\",new Promise(function(resolve){// Create an input element\nvar inputElement=document.createElement('input');// Set its type to file\ninputElement.type='file';// Set accept to the file types you want the user to select.\n// Include both the file extension and the mime type\nif(accept){inputElement.accept=accept;}// set onchange event to call callback when user has selected file\ninputElement.addEventListener('change',function(){resolve(inputElement.files);});// dispatch a click event to open the file dialog\ninputElement.dispatchEvent(new MouseEvent('click'));}));case 1:case\"end\":return _context5.stop();}}},_callee5);}));return _openFileSelector.apply(this,arguments);}export function getAndSaveClientId(){var clientId=window.localStorage.getItem('watchparty-clientid');if(!clientId){// Generate a new clientID and save it\nclientId=uuidv4();window.localStorage.setItem('watchparty-clientid',clientId);}return clientId;}export function calculateMedian(array){// Check If Data Exists\nif(array.length>=1){// Sort Array\narray=array.sort(function(a,b){return a-b;});// Array Length: Even\nif(array.length%2===0){// Average Of Two Middle Numbers\nreturn(array[array.length/2-1]+array[array.length/2])/2;}// Array Length: Odd\nelse{// Middle Number\nreturn array[(array.length-1)/2];}}return 0;}export function getUserImage(_x7){return _getUserImage.apply(this,arguments);}function _getUserImage(){_getUserImage=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(user){var hash,gravatar,response;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:// Check if user has a Gravatar\nhash=user.email?md5(user.email):'';if(!user.email){_context6.next=8;break;}gravatar=\"https://www.gravatar.com/avatar/\".concat(hash,\"?d=404&s=256\");_context6.next=5;return window.fetch(gravatar);case 5:response=_context6.sent;if(!response.ok){_context6.next=8;break;}return _context6.abrupt(\"return\",gravatar);case 8:if(!user.photoURL){_context6.next=10;break;}return _context6.abrupt(\"return\",user.photoURL+'?height=256&width=256');case 10:return _context6.abrupt(\"return\",\"https://www.gravatar.com/avatar/\".concat(hash,\"?d=identicon\"));case 11:case\"end\":return _context6.stop();}}},_callee6);}));return _getUserImage.apply(this,arguments);}export var getFileName=function getFileName(input){return input.split('/').slice(-1)[0];};export var isEmojiString=function isEmojiString(input){return /^(\\u00a9|\\u00ae|[\\u2000-\\u3300]|\\ud83c[\\ud000-\\udfff]|\\ud83d[\\ud000-\\udfff]|\\ud83e[\\ud000-\\udfff])+$/g.test(input);};","map":{"version":3,"names":["canAutoplay","v4","uuidv4","md5","XMLParser","formatTimestamp","input","undefined","Number","isNaN","Infinity","hours","Math","floor","minutes","toString","padStart","seconds","formatUnixTime","MAX_SAFE_INTEGER","Date","toISOString","formatSpeed","toFixed","formatSize","hashString","hash","i","length","charCode","charCodeAt","colorMappings","red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black","colorCache","getColorForString","id","colors","abs","getColorForStringHex","getFbPhoto","fbId","isYouTube","startsWith","isHttp","isMagnet","isHls","includes","isScreenShare","isFileShare","isVBrowser","testAutoplay","video","result","decodeEntities","doc","DOMParser","parseFromString","documentElement","textContent","debounce","func","wait","immediate","timeout","executedFunction","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","getDefaultPicture","name","background","isMobile","window","screen","width","shuffle","array","j","random","temp","iceServers","urls","username","credential","serverPath","process","env","REACT_APP_SERVER_HOST","location","protocol","NODE_ENV","host","hostname","getMediaPathResults","mediaPath","query","fetch","response","results","text","xml","parser","data","parse","filtered","ListBucketResult","Contents","filter","file","Key","map","url","json","type","option","endsWith","toLowerCase","getStreamPathResults","streamPath","encodeURIComponent","getYouTubeResults","d","openFileSelector","accept","Promise","resolve","inputElement","document","createElement","addEventListener","files","dispatchEvent","MouseEvent","getAndSaveClientId","clientId","localStorage","getItem","setItem","calculateMedian","sort","a","b","getUserImage","user","email","gravatar","ok","photoURL","getFileName","split","slice","isEmojiString","test"],"sources":["/home/runner/work/watchparty/watchparty/src/utils/index.ts"],"sourcesContent":["//@ts-ignore\nimport canAutoplay from 'can-autoplay';\nimport { v4 as uuidv4 } from 'uuid';\nimport md5 from 'blueimp-md5';\nimport firebase from 'firebase/compat/app';\nimport { XMLParser } from 'fast-xml-parser';\n\nexport function formatTimestamp(input: any) {\n  if (\n    input === null ||\n    input === undefined ||\n    input === false ||\n    Number.isNaN(input) ||\n    input === Infinity\n  ) {\n    return '';\n  }\n  let hours = Math.floor(Number(input) / 3600);\n  let minutes = (Math.floor(Number(input) / 60) % 60)\n    .toString()\n    .padStart(2, '0');\n  let seconds = Math.floor(Number(input) % 60)\n    .toString()\n    .padStart(2, '0');\n  return `${hours ? `${hours}:` : ''}${minutes}:${seconds}`;\n}\n\nexport function formatUnixTime(input: string) {\n  try {\n    if (Number(input) >= Number.MAX_SAFE_INTEGER) {\n      return 'live';\n    }\n    return new Date(Number(input) * 1000).toISOString();\n  } catch {\n    return input;\n  }\n}\n\nexport function formatSpeed(input: number) {\n  if (input >= 1000000) {\n    return (input / 1000000).toFixed(2) + ' MB/s';\n  }\n  if (input >= 1000) {\n    return (input / 1000).toFixed(0) + ' KB/s';\n  }\n  return input + ' B/s';\n}\n\nexport function formatSize(input: number) {\n  if (input >= 1000000000) {\n    return (input / 1000000000).toFixed(2) + ' GB';\n  }\n  if (input >= 1000000) {\n    return (input / 1000000).toFixed(2) + ' MB';\n  }\n  if (input >= 1000) {\n    return (input / 1000).toFixed(0) + ' KB';\n  }\n  return input + ' B';\n}\n\nexport function hashString(input: string) {\n  var hash = 0;\n  for (var i = 0; i < input.length; i++) {\n    var charCode = input.charCodeAt(i);\n    hash += charCode;\n  }\n  return hash;\n}\n\nexport const colorMappings: StringDict = {\n  red: 'B03060',\n  orange: 'FE9A76',\n  yellow: 'FFD700',\n  olive: '32CD32',\n  green: '016936',\n  teal: '008080',\n  blue: '0E6EB8',\n  violet: 'EE82EE',\n  purple: 'B413EC',\n  pink: 'FF1493',\n  brown: 'A52A2A',\n  grey: 'A0A0A0',\n  black: '000000',\n};\n\nlet colorCache = {} as NumberDict;\nexport function getColorForString(id: string) {\n  let colors = [\n    'red',\n    'orange',\n    'yellow',\n    'olive',\n    'green',\n    'teal',\n    'blue',\n    'violet',\n    'purple',\n    'pink',\n    'brown',\n    'grey',\n  ];\n  if (colorCache[id]) {\n    return colors[colorCache[id]];\n  }\n  colorCache[id] = Math.abs(hashString(id)) % colors.length;\n  return colors[colorCache[id]];\n}\n\nexport function getColorForStringHex(id: string) {\n  return colorMappings[getColorForString(id)];\n}\n\nexport const getFbPhoto = (fbId: string) =>\n  `https://graph.facebook.com/${fbId}/picture?type=normal`;\n\nexport const isYouTube = (input: string) => {\n  return (\n    input.startsWith('https://www.youtube.com/') ||\n    input.startsWith('https://youtu.be/')\n  );\n};\n\nexport const isHttp = (input: string) => {\n  return input.startsWith('http');\n};\n\nexport const isMagnet = (input: string) => {\n  return input.startsWith('magnet:');\n};\n\nexport const isHls = (input: string) => {\n  return input.includes('.m3u8');\n};\n\nexport const isScreenShare = (input: string) => {\n  return input.startsWith('screenshare://');\n};\n\nexport const isFileShare = (input: string) => {\n  return input.startsWith('fileshare://');\n};\n\nexport const isVBrowser = (input: string) => {\n  return input.startsWith('vbrowser://');\n};\n\nexport async function testAutoplay() {\n  const result = await canAutoplay.video();\n  return result.result;\n}\n\nexport function decodeEntities(input: string) {\n  const doc = new DOMParser().parseFromString(input, 'text/html');\n  return doc.documentElement.textContent;\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport function debounce(func: Function, wait: number, immediate?: boolean) {\n  var timeout: any;\n\n  // This is the function that is actually executed when\n  // the DOM event is triggered.\n  return function executedFunction() {\n    // Store the context of this and any\n    // parameters passed to executedFunction\n    //@ts-ignore\n    var context = this;\n    var args = arguments;\n\n    // The function to be called after\n    // the debounce time has elapsed\n    var later = function () {\n      // null timeout to indicate the debounce ended\n      timeout = null;\n\n      // Call function now if you did not on the leading end\n      if (!immediate) func.apply(context, args);\n    };\n\n    // Determine if you should call the function\n    // on the leading or trail end\n    var callNow = immediate && !timeout;\n\n    // This will reset the waiting every function execution.\n    // This is the step that prevents the function from\n    // being executed because it will never reach the\n    // inside of the previous setTimeout\n    clearTimeout(timeout);\n\n    // Restart the debounce waiting period.\n    // setTimeout returns a truthy value (it differs in web vs node)\n    timeout = setTimeout(later, wait);\n\n    // Call immediately if you're dong a leading\n    // end execution\n    if (callNow) func.apply(context, args);\n  };\n}\n\nexport const getDefaultPicture = (name: string, background = 'a0a0a0') => {\n  return `https://ui-avatars.com/api/?name=${name}&background=${background}&size=256&color=ffffff`;\n};\n\nexport const isMobile = () => {\n  return window.screen.width <= 600;\n};\n\nexport function shuffle(array: any[]) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * i);\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n}\n\nexport const iceServers = () => [\n  { urls: 'stun:stun.l.google.com:19302' },\n  {\n    urls: 'turn:5.161.49.183:3478',\n    username: 'username',\n    credential: 'password',\n  },\n  {\n    urls: 'turn:135.181.147.65:3478',\n    username: 'username',\n    credential: 'password',\n  },\n  {\n    urls: 'turn:numb.viagenie.ca',\n    credential: 'watchparty',\n    username: 'howardzchung@gmail.com',\n  },\n];\n\nexport const serverPath =\n  process.env.REACT_APP_SERVER_HOST ||\n  `${window.location.protocol}//${\n    process.env.NODE_ENV === 'production'\n      ? window.location.host\n      : `${window.location.hostname}:8080`\n  }`;\n\nexport async function getMediaPathResults(\n  mediaPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(mediaPath);\n  let results: SearchResult[] = [];\n  if (mediaPath.includes('s3.')) {\n    // S3-style buckets return data in XML\n    const xml = await response.text();\n    const parser = new XMLParser();\n    const data = parser.parse(xml);\n    let filtered = data.ListBucketResult.Contents.filter(\n      // Exclude subdirectories\n      (file: any) => !file.Key.includes('/')\n    );\n    results = filtered.map((file: any) => ({\n      url: mediaPath + '/' + file.Key,\n      name: mediaPath + '/' + file.Key,\n    }));\n  } else {\n    // nginx with autoindex_format json;\n    const data = await response.json();\n    results = data\n      .filter((file: any) => file.type === 'file')\n      .map((file: any) => ({\n        url: mediaPath + '/' + file.name,\n        name: mediaPath + '/' + file.name,\n      }));\n  }\n  results = results.filter(\n    (option: SearchResult) =>\n      // Exclude subtitles\n      !option.url.endsWith('.srt') &&\n      option.name.toLowerCase().includes(query.toLowerCase())\n  );\n  return results;\n}\n\nexport async function getStreamPathResults(\n  streamPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    streamPath + `/${query ? 'search' : 'top'}?q=` + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function getYouTubeResults(\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    serverPath + '/youtube?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data.map((d: any) => ({ ...d, type: 'youtube' }));\n}\n\nexport async function openFileSelector(accept?: string) {\n  return new Promise<FileList | null>((resolve) => {\n    // Create an input element\n    const inputElement = document.createElement('input');\n\n    // Set its type to file\n    inputElement.type = 'file';\n\n    // Set accept to the file types you want the user to select.\n    // Include both the file extension and the mime type\n    if (accept) {\n      inputElement.accept = accept;\n    }\n\n    // set onchange event to call callback when user has selected file\n    inputElement.addEventListener('change', () => {\n      resolve(inputElement.files);\n    });\n\n    // dispatch a click event to open the file dialog\n    inputElement.dispatchEvent(new MouseEvent('click'));\n  });\n}\n\nexport function getAndSaveClientId() {\n  let clientId = window.localStorage.getItem('watchparty-clientid');\n  if (!clientId) {\n    // Generate a new clientID and save it\n    clientId = uuidv4();\n    window.localStorage.setItem('watchparty-clientid', clientId);\n  }\n  return clientId;\n}\n\nexport function calculateMedian(array: number[]): number {\n  // Check If Data Exists\n  if (array.length >= 1) {\n    // Sort Array\n    array = array.sort((a: number, b: number) => {\n      return a - b;\n    });\n\n    // Array Length: Even\n    if (array.length % 2 === 0) {\n      // Average Of Two Middle Numbers\n      return (array[array.length / 2 - 1] + array[array.length / 2]) / 2;\n    }\n    // Array Length: Odd\n    else {\n      // Middle Number\n      return array[(array.length - 1) / 2];\n    }\n  }\n  return 0;\n}\n\nexport async function getUserImage(\n  user: firebase.User\n): Promise<string | null> {\n  // Check if user has a Gravatar\n  const hash = user.email ? md5(user.email) : '';\n  if (user.email) {\n    const gravatar = `https://www.gravatar.com/avatar/${hash}?d=404&s=256`;\n    const response = await window.fetch(gravatar);\n    if (response.ok) {\n      return gravatar;\n    }\n  }\n  if (user.photoURL) {\n    return user.photoURL + '?height=256&width=256';\n  }\n  return `https://www.gravatar.com/avatar/${hash}?d=identicon`;\n}\n\nexport const getFileName = (input: string) => {\n  return input.split('/').slice(-1)[0];\n};\n\nexport const isEmojiString = (input: string): boolean => {\n  return /^(\\u00a9|\\u00ae|[\\u2000-\\u3300]|\\ud83c[\\ud000-\\udfff]|\\ud83d[\\ud000-\\udfff]|\\ud83e[\\ud000-\\udfff])+$/g.test(\n    input\n  );\n};\n"],"mappings":"sYAAA;AACA,MAAOA,YAAP,KAAwB,cAAxB,CACA,OAASC,EAAE,GAAIC,OAAf,KAA6B,MAA7B,CACA,MAAOC,IAAP,KAAgB,aAAhB,CAEA,OAASC,SAAT,KAA0B,iBAA1B,CAEA,MAAO,SAASC,gBAAT,CAAyBC,KAAzB,CAAqC,CAC1C,GACEA,KAAK,GAAK,IAAV,EACAA,KAAK,GAAKC,SADV,EAEAD,KAAK,GAAK,KAFV,EAGAE,MAAM,CAACC,KAAP,CAAaH,KAAb,CAHA,EAIAA,KAAK,GAAKI,QALZ,CAME,CACA,MAAO,EAAP,CACD,CACD,GAAIC,MAAK,CAAGC,IAAI,CAACC,KAAL,CAAWL,MAAM,CAACF,KAAD,CAAN,CAAgB,IAA3B,CAAZ,CACA,GAAIQ,QAAO,CAAG,CAACF,IAAI,CAACC,KAAL,CAAWL,MAAM,CAACF,KAAD,CAAN,CAAgB,EAA3B,EAAiC,EAAlC,EACXS,QADW,GAEXC,QAFW,CAEF,CAFE,CAEC,GAFD,CAAd,CAGA,GAAIC,QAAO,CAAGL,IAAI,CAACC,KAAL,CAAWL,MAAM,CAACF,KAAD,CAAN,CAAgB,EAA3B,EACXS,QADW,GAEXC,QAFW,CAEF,CAFE,CAEC,GAFD,CAAd,CAGA,gBAAUL,KAAK,WAAMA,KAAN,MAAiB,EAAhC,SAAqCG,OAArC,aAAgDG,OAAhD,EACD,CAED,MAAO,SAASC,eAAT,CAAwBZ,KAAxB,CAAuC,CAC5C,GAAI,CACF,GAAIE,MAAM,CAACF,KAAD,CAAN,EAAiBE,MAAM,CAACW,gBAA5B,CAA8C,CAC5C,MAAO,MAAP,CACD,CACD,MAAO,IAAIC,KAAJ,CAASZ,MAAM,CAACF,KAAD,CAAN,CAAgB,IAAzB,EAA+Be,WAA/B,EAAP,CACD,CAAC,cAAM,CACN,MAAOf,MAAP,CACD,CACF,CAED,MAAO,SAASgB,YAAT,CAAqBhB,KAArB,CAAoC,CACzC,GAAIA,KAAK,EAAI,OAAb,CAAsB,CACpB,MAAO,CAACA,KAAK,CAAG,OAAT,EAAkBiB,OAAlB,CAA0B,CAA1B,EAA+B,OAAtC,CACD,CACD,GAAIjB,KAAK,EAAI,IAAb,CAAmB,CACjB,MAAO,CAACA,KAAK,CAAG,IAAT,EAAeiB,OAAf,CAAuB,CAAvB,EAA4B,OAAnC,CACD,CACD,MAAOjB,MAAK,CAAG,MAAf,CACD,CAED,MAAO,SAASkB,WAAT,CAAoBlB,KAApB,CAAmC,CACxC,GAAIA,KAAK,EAAI,UAAb,CAAyB,CACvB,MAAO,CAACA,KAAK,CAAG,UAAT,EAAqBiB,OAArB,CAA6B,CAA7B,EAAkC,KAAzC,CACD,CACD,GAAIjB,KAAK,EAAI,OAAb,CAAsB,CACpB,MAAO,CAACA,KAAK,CAAG,OAAT,EAAkBiB,OAAlB,CAA0B,CAA1B,EAA+B,KAAtC,CACD,CACD,GAAIjB,KAAK,EAAI,IAAb,CAAmB,CACjB,MAAO,CAACA,KAAK,CAAG,IAAT,EAAeiB,OAAf,CAAuB,CAAvB,EAA4B,KAAnC,CACD,CACD,MAAOjB,MAAK,CAAG,IAAf,CACD,CAED,MAAO,SAASmB,WAAT,CAAoBnB,KAApB,CAAmC,CACxC,GAAIoB,KAAI,CAAG,CAAX,CACA,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGrB,KAAK,CAACsB,MAA1B,CAAkCD,CAAC,EAAnC,CAAuC,CACrC,GAAIE,SAAQ,CAAGvB,KAAK,CAACwB,UAAN,CAAiBH,CAAjB,CAAf,CACAD,IAAI,EAAIG,QAAR,CACD,CACD,MAAOH,KAAP,CACD,CAED,MAAO,IAAMK,cAAyB,CAAG,CACvCC,GAAG,CAAE,QADkC,CAEvCC,MAAM,CAAE,QAF+B,CAGvCC,MAAM,CAAE,QAH+B,CAIvCC,KAAK,CAAE,QAJgC,CAKvCC,KAAK,CAAE,QALgC,CAMvCC,IAAI,CAAE,QANiC,CAOvCC,IAAI,CAAE,QAPiC,CAQvCC,MAAM,CAAE,QAR+B,CASvCC,MAAM,CAAE,QAT+B,CAUvCC,IAAI,CAAE,QAViC,CAWvCC,KAAK,CAAE,QAXgC,CAYvCC,IAAI,CAAE,QAZiC,CAavCC,KAAK,CAAE,QAbgC,CAAlC,CAgBP,GAAIC,WAAU,CAAG,EAAjB,CACA,MAAO,SAASC,kBAAT,CAA2BC,EAA3B,CAAuC,CAC5C,GAAIC,OAAM,CAAG,CACX,KADW,CAEX,QAFW,CAGX,QAHW,CAIX,OAJW,CAKX,OALW,CAMX,MANW,CAOX,MAPW,CAQX,QARW,CASX,QATW,CAUX,MAVW,CAWX,OAXW,CAYX,MAZW,CAAb,CAcA,GAAIH,UAAU,CAACE,EAAD,CAAd,CAAoB,CAClB,MAAOC,OAAM,CAACH,UAAU,CAACE,EAAD,CAAX,CAAb,CACD,CACDF,UAAU,CAACE,EAAD,CAAV,CAAiBnC,IAAI,CAACqC,GAAL,CAASxB,UAAU,CAACsB,EAAD,CAAnB,EAA2BC,MAAM,CAACpB,MAAnD,CACA,MAAOoB,OAAM,CAACH,UAAU,CAACE,EAAD,CAAX,CAAb,CACD,CAED,MAAO,SAASG,qBAAT,CAA8BH,EAA9B,CAA0C,CAC/C,MAAOhB,cAAa,CAACe,iBAAiB,CAACC,EAAD,CAAlB,CAApB,CACD,CAED,MAAO,IAAMI,WAAU,CAAG,QAAbA,WAAa,CAACC,IAAD,6CACMA,IADN,0BAAnB,CAGP,MAAO,IAAMC,UAAS,CAAG,QAAZA,UAAY,CAAC/C,KAAD,CAAmB,CAC1C,MACEA,MAAK,CAACgD,UAAN,CAAiB,0BAAjB,GACAhD,KAAK,CAACgD,UAAN,CAAiB,mBAAjB,CAFF,CAID,CALM,CAOP,MAAO,IAAMC,OAAM,CAAG,QAATA,OAAS,CAACjD,KAAD,CAAmB,CACvC,MAAOA,MAAK,CAACgD,UAAN,CAAiB,MAAjB,CAAP,CACD,CAFM,CAIP,MAAO,IAAME,SAAQ,CAAG,QAAXA,SAAW,CAAClD,KAAD,CAAmB,CACzC,MAAOA,MAAK,CAACgD,UAAN,CAAiB,SAAjB,CAAP,CACD,CAFM,CAIP,MAAO,IAAMG,MAAK,CAAG,QAARA,MAAQ,CAACnD,KAAD,CAAmB,CACtC,MAAOA,MAAK,CAACoD,QAAN,CAAe,OAAf,CAAP,CACD,CAFM,CAIP,MAAO,IAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACrD,KAAD,CAAmB,CAC9C,MAAOA,MAAK,CAACgD,UAAN,CAAiB,gBAAjB,CAAP,CACD,CAFM,CAIP,MAAO,IAAMM,YAAW,CAAG,QAAdA,YAAc,CAACtD,KAAD,CAAmB,CAC5C,MAAOA,MAAK,CAACgD,UAAN,CAAiB,cAAjB,CAAP,CACD,CAFM,CAIP,MAAO,IAAMO,WAAU,CAAG,QAAbA,WAAa,CAACvD,KAAD,CAAmB,CAC3C,MAAOA,MAAK,CAACgD,UAAN,CAAiB,aAAjB,CAAP,CACD,CAFM,CAIP,eAAsBQ,aAAtB,+C,iGAAO,sKACgB9D,YAAW,CAAC+D,KAAZ,EADhB,QACCC,MADD,+CAEEA,MAAM,CAACA,MAFT,wD,+CAKP,MAAO,SAASC,eAAT,CAAwB3D,KAAxB,CAAuC,CAC5C,GAAM4D,IAAG,CAAG,GAAIC,UAAJ,GAAgBC,eAAhB,CAAgC9D,KAAhC,CAAuC,WAAvC,CAAZ,CACA,MAAO4D,IAAG,CAACG,eAAJ,CAAoBC,WAA3B,CACD,CAED;AACA;AACA;AACA;AACA,MAAO,SAASC,SAAT,CAAkBC,IAAlB,CAAkCC,IAAlC,CAAgDC,SAAhD,CAAqE,CAC1E,GAAIC,QAAJ,CAEA;AACA;AACA,MAAO,SAASC,iBAAT,EAA4B,CACjC;AACA;AACA;AACA,GAAIC,QAAO,CAAG,IAAd,CACA,GAAIC,KAAI,CAAGC,SAAX,CAEA;AACA;AACA,GAAIC,MAAK,CAAG,QAARA,MAAQ,EAAY,CACtB;AACAL,OAAO,CAAG,IAAV,CAEA;AACA,GAAI,CAACD,SAAL,CAAgBF,IAAI,CAACS,KAAL,CAAWJ,OAAX,CAAoBC,IAApB,EACjB,CAND,CAQA;AACA;AACA,GAAII,QAAO,CAAGR,SAAS,EAAI,CAACC,OAA5B,CAEA;AACA;AACA;AACA;AACAQ,YAAY,CAACR,OAAD,CAAZ,CAEA;AACA;AACAA,OAAO,CAAGS,UAAU,CAACJ,KAAD,CAAQP,IAAR,CAApB,CAEA;AACA;AACA,GAAIS,OAAJ,CAAaV,IAAI,CAACS,KAAL,CAAWJ,OAAX,CAAoBC,IAApB,EACd,CAlCD,CAmCD,CAED,MAAO,IAAMO,kBAAiB,CAAG,QAApBA,kBAAoB,CAACC,IAAD,CAAyC,IAA1BC,WAA0B,2DAAb,QAAa,CACxE,iDAA2CD,IAA3C,wBAA8DC,UAA9D,2BACD,CAFM,CAIP,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CAC5B,MAAOC,OAAM,CAACC,MAAP,CAAcC,KAAd,EAAuB,GAA9B,CACD,CAFM,CAIP,MAAO,SAASC,QAAT,CAAiBC,KAAjB,CAA+B,CACpC,IAAK,GAAIlE,EAAC,CAAGkE,KAAK,CAACjE,MAAN,CAAe,CAA5B,CAA+BD,CAAC,CAAG,CAAnC,CAAsCA,CAAC,EAAvC,CAA2C,CACzC,GAAMmE,EAAC,CAAGlF,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACmF,MAAL,GAAgBpE,CAA3B,CAAV,CACA,GAAMqE,KAAI,CAAGH,KAAK,CAAClE,CAAD,CAAlB,CACAkE,KAAK,CAAClE,CAAD,CAAL,CAAWkE,KAAK,CAACC,CAAD,CAAhB,CACAD,KAAK,CAACC,CAAD,CAAL,CAAWE,IAAX,CACD,CACF,CAED,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAa,SAAM,CAC9B,CAAEC,IAAI,CAAE,8BAAR,CAD8B,CAE9B,CACEA,IAAI,CAAE,wBADR,CAEEC,QAAQ,CAAE,UAFZ,CAGEC,UAAU,CAAE,UAHd,CAF8B,CAO9B,CACEF,IAAI,CAAE,0BADR,CAEEC,QAAQ,CAAE,UAFZ,CAGEC,UAAU,CAAE,UAHd,CAP8B,CAY9B,CACEF,IAAI,CAAE,uBADR,CAEEE,UAAU,CAAE,YAFd,CAGED,QAAQ,CAAE,wBAHZ,CAZ8B,CAAN,EAAnB,CAmBP,MAAO,IAAME,WAAU,CACrBC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,YACGf,MAAM,CAACgB,QAAP,CAAgBC,QADnB,cAEEJ,OAAO,CAACC,GAAR,CAAYI,QAAZ,GAAyB,YAAzB,CACIlB,MAAM,CAACgB,QAAP,CAAgBG,IADpB,WAEOnB,MAAM,CAACgB,QAAP,CAAgBI,QAFvB,SAFF,CADK,CAQP,eAAsBC,oBAAtB,4D,+GAAO,kBACLC,SADK,CAELC,KAFK,mMAIkBvB,OAAM,CAACwB,KAAP,CAAaF,SAAb,CAJlB,QAICG,QAJD,gBAKDC,OALC,CAKyB,EALzB,KAMDJ,SAAS,CAACrD,QAAV,CAAmB,KAAnB,CANC,kDAQewD,SAAQ,CAACE,IAAT,EARf,QAQGC,GARH,gBASGC,MATH,CASY,GAAIlH,UAAJ,EATZ,CAUGmH,IAVH,CAUUD,MAAM,CAACE,KAAP,CAAaH,GAAb,CAVV,CAWCI,QAXD,CAWYF,IAAI,CAACG,gBAAL,CAAsBC,QAAtB,CAA+BC,MAA/B,CACb;AACA,SAACC,IAAD,QAAe,CAACA,IAAI,CAACC,GAAL,CAASpE,QAAT,CAAkB,GAAlB,CAAhB,EAFa,CAXZ,CAeHyD,OAAO,CAAGM,QAAQ,CAACM,GAAT,CAAa,SAACF,IAAD,QAAgB,CACrCG,GAAG,CAAEjB,SAAS,CAAG,GAAZ,CAAkBc,IAAI,CAACC,GADS,CAErCxC,IAAI,CAAEyB,SAAS,CAAG,GAAZ,CAAkBc,IAAI,CAACC,GAFQ,CAAhB,EAAb,CAAV,CAfG,wDAqBgBZ,SAAQ,CAACe,IAAT,EArBhB,SAqBGV,KArBH,gBAsBHJ,OAAO,CAAGI,KAAI,CACXK,MADO,CACA,SAACC,IAAD,QAAeA,KAAI,CAACK,IAAL,GAAc,MAA7B,EADA,EAEPH,GAFO,CAEH,SAACF,IAAD,QAAgB,CACnBG,GAAG,CAAEjB,SAAS,CAAG,GAAZ,CAAkBc,IAAI,CAACvC,IADT,CAEnBA,IAAI,CAAEyB,SAAS,CAAG,GAAZ,CAAkBc,IAAI,CAACvC,IAFV,CAAhB,EAFG,CAAV,CAtBG,QA6BL6B,OAAO,CAAGA,OAAO,CAACS,MAAR,CACR,SAACO,MAAD,QACE;AACA,CAACA,MAAM,CAACH,GAAP,CAAWI,QAAX,CAAoB,MAApB,CAAD,EACAD,MAAM,CAAC7C,IAAP,CAAY+C,WAAZ,GAA0B3E,QAA1B,CAAmCsD,KAAK,CAACqB,WAAN,EAAnC,CAHF,GADQ,CAAV,CA7BK,iCAmCElB,OAnCF,2D,sDAsCP,eAAsBmB,qBAAtB,8D,iHAAO,kBACLC,UADK,CAELvB,KAFK,iKAIkBvB,OAAM,CAACwB,KAAP,CACrBsB,UAAU,YAAOvB,KAAK,CAAG,QAAH,CAAc,KAA1B,OAAV,CAAiDwB,kBAAkB,CAACxB,KAAD,CAD9C,CAJlB,QAICE,QAJD,uCAOcA,SAAQ,CAACe,IAAT,EAPd,QAOCV,IAPD,iDAQEA,IARF,0D,uDAWP,eAAsBkB,kBAAtB,uD,2GAAO,kBACLzB,KADK,iKAGkBvB,OAAM,CAACwB,KAAP,CACrBZ,UAAU,CAAG,aAAb,CAA6BmC,kBAAkB,CAACxB,KAAD,CAD1B,CAHlB,QAGCE,QAHD,uCAMcA,SAAQ,CAACe,IAAT,EANd,QAMCV,IAND,iDAOEA,IAAI,CAACQ,GAAL,CAAS,SAACW,CAAD,wCAAkBA,CAAlB,MAAqBR,IAAI,CAAE,SAA3B,IAAT,CAPF,0D,oDAUP,eAAsBS,iBAAtB,sD,yGAAO,kBAAgCC,MAAhC,yJACE,GAAIC,QAAJ,CAA6B,SAACC,OAAD,CAAa,CAC/C;AACA,GAAMC,aAAY,CAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAArB,CAEA;AACAF,YAAY,CAACb,IAAb,CAAoB,MAApB,CAEA;AACA;AACA,GAAIU,MAAJ,CAAY,CACVG,YAAY,CAACH,MAAb,CAAsBA,MAAtB,CACD,CAED;AACAG,YAAY,CAACG,gBAAb,CAA8B,QAA9B,CAAwC,UAAM,CAC5CJ,OAAO,CAACC,YAAY,CAACI,KAAd,CAAP,CACD,CAFD,EAIA;AACAJ,YAAY,CAACK,aAAb,CAA2B,GAAIC,WAAJ,CAAe,OAAf,CAA3B,EACD,CApBM,CADF,0D,mDAwBP,MAAO,SAASC,mBAAT,EAA8B,CACnC,GAAIC,SAAQ,CAAG9D,MAAM,CAAC+D,YAAP,CAAoBC,OAApB,CAA4B,qBAA5B,CAAf,CACA,GAAI,CAACF,QAAL,CAAe,CACb;AACAA,QAAQ,CAAGrJ,MAAM,EAAjB,CACAuF,MAAM,CAAC+D,YAAP,CAAoBE,OAApB,CAA4B,qBAA5B,CAAmDH,QAAnD,EACD,CACD,MAAOA,SAAP,CACD,CAED,MAAO,SAASI,gBAAT,CAAyB9D,KAAzB,CAAkD,CACvD;AACA,GAAIA,KAAK,CAACjE,MAAN,EAAgB,CAApB,CAAuB,CACrB;AACAiE,KAAK,CAAGA,KAAK,CAAC+D,IAAN,CAAW,SAACC,CAAD,CAAYC,CAAZ,CAA0B,CAC3C,MAAOD,EAAC,CAAGC,CAAX,CACD,CAFO,CAAR,CAIA;AACA,GAAIjE,KAAK,CAACjE,MAAN,CAAe,CAAf,GAAqB,CAAzB,CAA4B,CAC1B;AACA,MAAO,CAACiE,KAAK,CAACA,KAAK,CAACjE,MAAN,CAAe,CAAf,CAAmB,CAApB,CAAL,CAA8BiE,KAAK,CAACA,KAAK,CAACjE,MAAN,CAAe,CAAhB,CAApC,EAA0D,CAAjE,CACD,CACD;AAJA,IAKK,CACH;AACA,MAAOiE,MAAK,CAAC,CAACA,KAAK,CAACjE,MAAN,CAAe,CAAhB,EAAqB,CAAtB,CAAZ,CACD,CACF,CACD,MAAO,EAAP,CACD,CAED,eAAsBmI,aAAtB,kD,iGAAO,kBACLC,IADK,mJAGL;AACMtI,IAJD,CAIQsI,IAAI,CAACC,KAAL,CAAa9J,GAAG,CAAC6J,IAAI,CAACC,KAAN,CAAhB,CAA+B,EAJvC,KAKDD,IAAI,CAACC,KALJ,0BAMGC,QANH,2CAMiDxI,IANjD,wCAOoB+D,OAAM,CAACwB,KAAP,CAAaiD,QAAb,CAPpB,QAOGhD,QAPH,oBAQCA,QAAQ,CAACiD,EARV,2DASMD,QATN,aAYDF,IAAI,CAACI,QAZJ,4DAaIJ,IAAI,CAACI,QAAL,CAAgB,uBAbpB,qFAeqC1I,IAfrC,2E,+CAkBP,MAAO,IAAM2I,YAAW,CAAG,QAAdA,YAAc,CAAC/J,KAAD,CAAmB,CAC5C,MAAOA,MAAK,CAACgK,KAAN,CAAY,GAAZ,EAAiBC,KAAjB,CAAuB,CAAC,CAAxB,EAA2B,CAA3B,CAAP,CACD,CAFM,CAIP,MAAO,IAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAAClK,KAAD,CAA4B,CACvD,MAAO,yGAAwGmK,IAAxG,CACLnK,KADK,CAAP,CAGD,CAJM"},"metadata":{},"sourceType":"module"}