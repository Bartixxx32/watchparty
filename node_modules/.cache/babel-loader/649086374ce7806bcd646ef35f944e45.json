{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Popup,Button}from'semantic-ui-react';import styles from'./UserMenu.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UserMenu=function UserMenu(_ref){var user=_ref.user,socket=_ref.socket,userToManage=_ref.userToManage,trigger=_ref.trigger,displayName=_ref.displayName,position=_ref.position,disabled=_ref.disabled,timestamp=_ref.timestamp,isChatMessage=_ref.isChatMessage;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var handleOpen=function handleOpen(){return setIsOpen(true);};var handleClose=function handleClose(){return setIsOpen(false);};return/*#__PURE__*/_jsxs(Popup,{className:styles.userMenu,trigger:trigger,on:\"click\",open:isOpen,onOpen:handleOpen,onClose:handleClose,position:position,disabled:disabled,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.userMenuHeader,children:displayName}),/*#__PURE__*/_jsx(\"div\",{className:styles.userMenuContent,children:/*#__PURE__*/_jsxs(Button.Group,{vertical:true,labeled:true,icon:true,children:[/*#__PURE__*/_jsx(Button,{content:\"Kick\",negative:true,icon:\"ban\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return user===null||user===void 0?void 0:user.getIdToken();case 2:token=_context.sent;socket.emit('kickUser',{userToBeKicked:userToManage,uid:user===null||user===void 0?void 0:user.uid,token:token});setIsOpen(false);case 5:case\"end\":return _context.stop();}}},_callee);}))}),isChatMessage&&/*#__PURE__*/_jsx(Button,{content:\"Delete Message\",icon:\"comment\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var token;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return user===null||user===void 0?void 0:user.getIdToken();case 2:token=_context2.sent;socket.emit('CMD:deleteChatMessages',{author:userToManage,timestamp:timestamp,uid:user===null||user===void 0?void 0:user.uid,token:token});setIsOpen(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}))}),/*#__PURE__*/_jsx(Button,{content:\"Delete User's Messages\",icon:\"comments\",onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var token;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return user===null||user===void 0?void 0:user.getIdToken();case 2:token=_context3.sent;socket.emit('CMD:deleteChatMessages',{author:userToManage,uid:user===null||user===void 0?void 0:user.uid,token:token});setIsOpen(false);case 5:case\"end\":return _context3.stop();}}},_callee3);}))})]})})]});};","map":{"version":3,"names":["React","useState","Popup","Button","styles","UserMenu","user","socket","userToManage","trigger","displayName","position","disabled","timestamp","isChatMessage","isOpen","setIsOpen","handleOpen","handleClose","userMenu","userMenuHeader","userMenuContent","getIdToken","token","emit","userToBeKicked","uid","author"],"sources":["/home/runner/work/watchparty/watchparty/src/components/UserMenu/UserMenu.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Popup, Button } from 'semantic-ui-react';\nimport { Socket } from 'socket.io-client';\nimport firebase from 'firebase/compat/app';\nimport styles from './UserMenu.module.css';\n\nexport const UserMenu = ({\n  user,\n  socket,\n  userToManage,\n  trigger,\n  displayName,\n  position,\n  disabled,\n  timestamp,\n  isChatMessage,\n}: {\n  user?: firebase.User;\n  socket: Socket;\n  userToManage: string;\n  trigger: any;\n  icon?: string;\n  displayName?: string;\n  position?: any;\n  disabled: boolean;\n  timestamp?: string;\n  isChatMessage?: boolean;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const handleOpen = () => setIsOpen(true);\n  const handleClose = () => setIsOpen(false);\n  return (\n    <Popup\n      className={styles.userMenu}\n      trigger={trigger}\n      on=\"click\"\n      open={isOpen}\n      onOpen={handleOpen}\n      onClose={handleClose}\n      position={position}\n      disabled={disabled}\n    >\n      <div className={styles.userMenuHeader}>{displayName}</div>\n      <div className={styles.userMenuContent}>\n        <Button.Group vertical labeled icon>\n          <Button\n            content=\"Kick\"\n            negative\n            icon=\"ban\"\n            onClick={async () => {\n              const token = await user?.getIdToken();\n              socket.emit('kickUser', {\n                userToBeKicked: userToManage,\n                uid: user?.uid,\n                token,\n              });\n              setIsOpen(false);\n            }}\n          />\n          {isChatMessage && (\n            <Button\n              content=\"Delete Message\"\n              icon=\"comment\"\n              onClick={async () => {\n                const token = await user?.getIdToken();\n                socket.emit('CMD:deleteChatMessages', {\n                  author: userToManage,\n                  timestamp: timestamp,\n                  uid: user?.uid,\n                  token,\n                });\n                setIsOpen(false);\n              }}\n            />\n          )}\n          <Button\n            content=\"Delete User's Messages\"\n            icon=\"comments\"\n            onClick={async () => {\n              const token = await user?.getIdToken();\n              socket.emit('CMD:deleteChatMessages', {\n                author: userToManage,\n                uid: user?.uid,\n                token,\n              });\n              setIsOpen(false);\n            }}\n          />\n        </Button.Group>\n      </div>\n    </Popup>\n  );\n};\n"],"mappings":"uYAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,KAAT,CAAgBC,MAAhB,KAA8B,mBAA9B,CAGA,MAAOC,OAAP,KAAmB,uBAAnB,C,wFAEA,MAAO,IAAMC,SAAQ,CAAG,QAAXA,SAAW,MAqBlB,IApBJC,KAoBI,MApBJA,IAoBI,CAnBJC,MAmBI,MAnBJA,MAmBI,CAlBJC,YAkBI,MAlBJA,YAkBI,CAjBJC,OAiBI,MAjBJA,OAiBI,CAhBJC,WAgBI,MAhBJA,WAgBI,CAfJC,QAeI,MAfJA,QAeI,CAdJC,QAcI,MAdJA,QAcI,CAbJC,SAaI,MAbJA,SAaI,CAZJC,aAYI,MAZJA,aAYI,CACJ,cAA4Bb,QAAQ,CAAC,KAAD,CAApC,wCAAOc,MAAP,eAAeC,SAAf,eACA,GAAMC,WAAU,CAAG,QAAbA,WAAa,SAAMD,UAAS,CAAC,IAAD,CAAf,EAAnB,CACA,GAAME,YAAW,CAAG,QAAdA,YAAc,SAAMF,UAAS,CAAC,KAAD,CAAf,EAApB,CACA,mBACE,MAAC,KAAD,EACE,SAAS,CAAEZ,MAAM,CAACe,QADpB,CAEE,OAAO,CAAEV,OAFX,CAGE,EAAE,CAAC,OAHL,CAIE,IAAI,CAAEM,MAJR,CAKE,MAAM,CAAEE,UALV,CAME,OAAO,CAAEC,WANX,CAOE,QAAQ,CAAEP,QAPZ,CAQE,QAAQ,CAAEC,QARZ,wBAUE,YAAK,SAAS,CAAER,MAAM,CAACgB,cAAvB,UAAwCV,WAAxC,EAVF,cAWE,YAAK,SAAS,CAAEN,MAAM,CAACiB,eAAvB,uBACE,MAAC,MAAD,CAAQ,KAAR,EAAc,QAAQ,KAAtB,CAAuB,OAAO,KAA9B,CAA+B,IAAI,KAAnC,wBACE,KAAC,MAAD,EACE,OAAO,CAAC,MADV,CAEE,QAAQ,KAFV,CAGE,IAAI,CAAC,KAHP,CAIE,OAAO,wEAAE,qKACaf,KADb,SACaA,IADb,iBACaA,IAAI,CAAEgB,UAAN,EADb,QACDC,KADC,eAEPhB,MAAM,CAACiB,IAAP,CAAY,UAAZ,CAAwB,CACtBC,cAAc,CAAEjB,YADM,CAEtBkB,GAAG,CAAEpB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEoB,GAFW,CAGtBH,KAAK,CAALA,KAHsB,CAAxB,EAKAP,SAAS,CAAC,KAAD,CAAT,CAPO,sDAAF,EAJT,EADF,CAeGF,aAAa,eACZ,KAAC,MAAD,EACE,OAAO,CAAC,gBADV,CAEE,IAAI,CAAC,SAFP,CAGE,OAAO,wEAAE,2KACaR,KADb,SACaA,IADb,iBACaA,IAAI,CAAEgB,UAAN,EADb,QACDC,KADC,gBAEPhB,MAAM,CAACiB,IAAP,CAAY,wBAAZ,CAAsC,CACpCG,MAAM,CAAEnB,YAD4B,CAEpCK,SAAS,CAAEA,SAFyB,CAGpCa,GAAG,CAAEpB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEoB,GAHyB,CAIpCH,KAAK,CAALA,KAJoC,CAAtC,EAMAP,SAAS,CAAC,KAAD,CAAT,CARO,wDAAF,EAHT,EAhBJ,cA+BE,KAAC,MAAD,EACE,OAAO,CAAC,wBADV,CAEE,IAAI,CAAC,UAFP,CAGE,OAAO,wEAAE,2KACaV,KADb,SACaA,IADb,iBACaA,IAAI,CAAEgB,UAAN,EADb,QACDC,KADC,gBAEPhB,MAAM,CAACiB,IAAP,CAAY,wBAAZ,CAAsC,CACpCG,MAAM,CAAEnB,YAD4B,CAEpCkB,GAAG,CAAEpB,IAAF,SAAEA,IAAF,iBAAEA,IAAI,CAAEoB,GAFyB,CAGpCH,KAAK,CAALA,KAHoC,CAAtC,EAKAP,SAAS,CAAC,KAAD,CAAT,CAPO,wDAAF,EAHT,EA/BF,GADF,EAXF,GADF,CA6DD,CAtFM"},"metadata":{},"sourceType":"module"}