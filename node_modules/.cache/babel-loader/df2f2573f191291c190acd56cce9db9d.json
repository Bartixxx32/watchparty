{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createClass from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"/home/runner/work/watchparty/watchparty/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import{default as toWebVTT}from'srt-webvtt';export var HTML=/*#__PURE__*/_createClass(function HTML(elId){var _this=this;_classCallCheck(this,HTML);this.elId=void 0;this.getVideoEl=function(){return document.getElementById(_this.elId);};this.getCurrentTime=function(){var _this$getVideoEl$curr,_this$getVideoEl;return(_this$getVideoEl$curr=(_this$getVideoEl=_this.getVideoEl())===null||_this$getVideoEl===void 0?void 0:_this$getVideoEl.currentTime)!==null&&_this$getVideoEl$curr!==void 0?_this$getVideoEl$curr:0;};this.getDuration=function(){var _this$getVideoEl$dura,_this$getVideoEl2;return(_this$getVideoEl$dura=(_this$getVideoEl2=_this.getVideoEl())===null||_this$getVideoEl2===void 0?void 0:_this$getVideoEl2.duration)!==null&&_this$getVideoEl$dura!==void 0?_this$getVideoEl$dura:0;};this.isMuted=function(){var _this$getVideoEl$mute,_this$getVideoEl3;return(_this$getVideoEl$mute=(_this$getVideoEl3=_this.getVideoEl())===null||_this$getVideoEl3===void 0?void 0:_this$getVideoEl3.muted)!==null&&_this$getVideoEl$mute!==void 0?_this$getVideoEl$mute:false;};this.isSubtitled=function(){return _this.getSubtitleMode()==='showing';};this.getPlaybackRate=function(){var _this$getVideoEl$play,_this$getVideoEl4;return(_this$getVideoEl$play=(_this$getVideoEl4=_this.getVideoEl())===null||_this$getVideoEl4===void 0?void 0:_this$getVideoEl4.playbackRate)!==null&&_this$getVideoEl$play!==void 0?_this$getVideoEl$play:1;};this.setPlaybackRate=function(rate){if(_this.getVideoEl()){_this.getVideoEl().playbackRate=rate;}};this.setSrcAndTime=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(src,time){var leftVideo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:leftVideo=_this.getVideoEl();if(leftVideo){leftVideo.currentTime=time;leftVideo.src=src;}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();this.playVideo=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!_this.getVideoEl()){_context2.next=3;break;}_context2.next=3;return _this.getVideoEl().play();case 3:case\"end\":return _context2.stop();}}},_callee2);}));this.pauseVideo=function(){if(_this.getVideoEl()){_this.getVideoEl().pause();}};this.seekVideo=function(time){if(_this.getVideoEl()){_this.getVideoEl().currentTime=time;}};this.shouldPlay=function(){var leftVideo=_this.getVideoEl();return Boolean((leftVideo===null||leftVideo===void 0?void 0:leftVideo.paused)||(leftVideo===null||leftVideo===void 0?void 0:leftVideo.ended));};this.setMute=function(muted){var leftVideo=_this.getVideoEl();if(leftVideo){leftVideo.muted=muted;}var audio=document.getElementById('iPhoneAudio');if(audio){audio.muted=muted;}};this.setVolume=function(volume){if(_this.getVideoEl()){_this.getVideoEl().volume=volume;}};this.getVolume=function(){var _this$getVideoEl$volu,_this$getVideoEl5;return(_this$getVideoEl$volu=(_this$getVideoEl5=_this.getVideoEl())===null||_this$getVideoEl5===void 0?void 0:_this$getVideoEl5.volume)!==null&&_this$getVideoEl$volu!==void 0?_this$getVideoEl$volu:1;};this.setSubtitleMode=function(mode){if(_this.getVideoEl()){for(var i=0;i<_this.getVideoEl().textTracks.length;i++){_this.getVideoEl().textTracks[i].mode=mode!==null&&mode!==void 0?mode:_this.getVideoEl().textTracks[i].mode==='hidden'?'showing':'hidden';}}};this.getSubtitleMode=function(){var _this$getVideoEl$text,_this$getVideoEl6,_this$getVideoEl6$tex;return(_this$getVideoEl$text=(_this$getVideoEl6=_this.getVideoEl())===null||_this$getVideoEl6===void 0?void 0:(_this$getVideoEl6$tex=_this$getVideoEl6.textTracks[0])===null||_this$getVideoEl6$tex===void 0?void 0:_this$getVideoEl6$tex.mode)!==null&&_this$getVideoEl$text!==void 0?_this$getVideoEl$text:'hidden';};this.isReady=function(){return Boolean(_this.getVideoEl());};this.clearState=function(){var leftVideo=_this.getVideoEl();// Clear src and srcObject\nleftVideo.src='';leftVideo.srcObject=null;// Clear subtitles\n_this.setSubtitleMode('hidden');leftVideo.innerHTML='';};this.loadSubtitles=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(src){var leftVideo,subtitleSrc,response,buffer,url,track;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:leftVideo=_this.getVideoEl();if(leftVideo){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3:// Clear subtitles and put new ones in\nleftVideo.innerHTML='';if(!Boolean(src)){_context3.next=23;break;}subtitleSrc=src;if(!subtitleSrc){_context3.next=23;break;}_context3.next=9;return window.fetch(subtitleSrc);case 9:response=_context3.sent;_context3.next=12;return response.arrayBuffer();case 12:buffer=_context3.sent;_context3.next=15;return toWebVTT(new Blob([buffer]));case 15:url=_context3.sent;track=document.createElement('track');track.kind='captions';track.label='English';track.srclang='en';track.src=url;leftVideo.appendChild(track);leftVideo.textTracks[0].mode='showing';case 23:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();this.syncSubtitles=function(sharerTime){// When sharing, our timestamp doesn't match the subtitles so adjust them\n// For each cue, subtract the videoTS of the sharer, then add our own\nvar leftVideo=_this.getVideoEl();var track=leftVideo===null||leftVideo===void 0?void 0:leftVideo.textTracks[0];var offset=leftVideo.currentTime-sharerTime;if(track&&track.cues&&offset){for(var i=0;i<track.cues.length;i++){var _track$cues;var cue=track===null||track===void 0?void 0:(_track$cues=track.cues)===null||_track$cues===void 0?void 0:_track$cues[i];if(!cue){continue;}// console.log(cue.text, offset, (cue as any).origStart, (cue as any).origEnd);\nif(!cue.origStart){cue.origStart=cue.startTime;cue.origEnd=cue.endTime;}cue.startTime=cue.origStart+offset;cue.endTime=cue.origEnd+offset;}}};this.getTimeRanges=function(){var leftVideo=_this.getVideoEl();var buffers=[];var rangeCount=leftVideo===null||leftVideo===void 0?void 0:leftVideo.buffered.length;for(var i=0;i<rangeCount;i++){var start=leftVideo===null||leftVideo===void 0?void 0:leftVideo.buffered.start(i);var end=leftVideo===null||leftVideo===void 0?void 0:leftVideo.buffered.end(i);buffers.push({start:start,end:end});}return buffers;};this.setLoop=function(loop){var leftVideo=_this.getVideoEl();leftVideo.loop=loop;};this.elId=elId;});","map":{"version":3,"names":["default","toWebVTT","HTML","elId","getVideoEl","document","getElementById","getCurrentTime","currentTime","getDuration","duration","isMuted","muted","isSubtitled","getSubtitleMode","getPlaybackRate","playbackRate","setPlaybackRate","rate","setSrcAndTime","src","time","leftVideo","playVideo","play","pauseVideo","pause","seekVideo","shouldPlay","Boolean","paused","ended","setMute","audio","setVolume","volume","getVolume","setSubtitleMode","mode","i","textTracks","length","isReady","clearState","srcObject","innerHTML","loadSubtitles","subtitleSrc","window","fetch","response","arrayBuffer","buffer","Blob","url","track","createElement","kind","label","srclang","appendChild","syncSubtitles","sharerTime","offset","cues","cue","origStart","startTime","origEnd","endTime","getTimeRanges","buffers","rangeCount","buffered","start","end","push","setLoop","loop"],"sources":["/home/runner/work/watchparty/watchparty/src/components/App/HTML.ts"],"sourcesContent":["import { default as toWebVTT } from 'srt-webvtt';\nimport { Player } from './Player';\n\nexport class HTML implements Player {\n  elId: string;\n  constructor(elId: string) {\n    this.elId = elId;\n  }\n\n  getVideoEl = (): HTMLMediaElement => {\n    return document.getElementById(this.elId) as HTMLMediaElement;\n  };\n\n  getCurrentTime = () => {\n    return this.getVideoEl()?.currentTime ?? 0;\n  };\n\n  getDuration = () => {\n    return this.getVideoEl()?.duration ?? 0;\n  };\n\n  isMuted = () => {\n    return this.getVideoEl()?.muted ?? false;\n  };\n\n  isSubtitled = () => {\n    return this.getSubtitleMode() === 'showing';\n  };\n\n  getPlaybackRate = (): number => {\n    return this.getVideoEl()?.playbackRate ?? 1;\n  };\n\n  setPlaybackRate = (rate: number) => {\n    if (this.getVideoEl()) {\n      this.getVideoEl().playbackRate = rate;\n    }\n  };\n\n  setSrcAndTime = async (src: string, time: number) => {\n    const leftVideo = this.getVideoEl();\n    if (leftVideo) {\n      leftVideo.currentTime = time;\n      leftVideo.src = src;\n    }\n  };\n\n  playVideo = async () => {\n    if (this.getVideoEl()) {\n      await this.getVideoEl().play();\n    }\n  };\n\n  pauseVideo = () => {\n    if (this.getVideoEl()) {\n      this.getVideoEl().pause();\n    }\n  };\n\n  seekVideo = (time: number) => {\n    if (this.getVideoEl()) {\n      this.getVideoEl().currentTime = time;\n    }\n  };\n\n  shouldPlay = () => {\n    const leftVideo = this.getVideoEl();\n    return Boolean(leftVideo?.paused || leftVideo?.ended);\n  };\n\n  setMute = (muted: boolean) => {\n    const leftVideo = this.getVideoEl();\n    if (leftVideo) {\n      leftVideo.muted = muted;\n    }\n    const audio = document.getElementById('iPhoneAudio') as HTMLAudioElement;\n    if (audio) {\n      audio.muted = muted;\n    }\n  };\n\n  setVolume = (volume: number) => {\n    if (this.getVideoEl()) {\n      this.getVideoEl().volume = volume;\n    }\n  };\n\n  getVolume = (): number => {\n    return this.getVideoEl()?.volume ?? 1;\n  };\n\n  setSubtitleMode = (mode?: TextTrackMode) => {\n    if (this.getVideoEl()) {\n      for (var i = 0; i < this.getVideoEl().textTracks.length; i++) {\n        this.getVideoEl().textTracks[i].mode =\n          mode ??\n          (this.getVideoEl().textTracks[i].mode === 'hidden'\n            ? 'showing'\n            : 'hidden');\n      }\n    }\n  };\n\n  getSubtitleMode = () => {\n    return this.getVideoEl()?.textTracks[0]?.mode ?? 'hidden';\n  };\n\n  isReady = () => {\n    return Boolean(this.getVideoEl());\n  };\n\n  clearState = () => {\n    const leftVideo = this.getVideoEl();\n\n    // Clear src and srcObject\n    leftVideo.src = '';\n    leftVideo.srcObject = null;\n\n    // Clear subtitles\n    this.setSubtitleMode('hidden');\n    leftVideo.innerHTML = '';\n  };\n\n  loadSubtitles = async (src: string) => {\n    const leftVideo = this.getVideoEl();\n    if (!leftVideo) {\n      return;\n    }\n    // Clear subtitles and put new ones in\n    leftVideo.innerHTML = '';\n    if (Boolean(src)) {\n      let subtitleSrc = src;\n      if (subtitleSrc) {\n        const response = await window.fetch(subtitleSrc);\n        const buffer = await response.arrayBuffer();\n        const url = await toWebVTT(new Blob([buffer]));\n        const track = document.createElement('track');\n        track.kind = 'captions';\n        track.label = 'English';\n        track.srclang = 'en';\n        track.src = url;\n        leftVideo.appendChild(track);\n        leftVideo.textTracks[0].mode = 'showing';\n      }\n    }\n  };\n\n  syncSubtitles = (sharerTime: number) => {\n    // When sharing, our timestamp doesn't match the subtitles so adjust them\n    // For each cue, subtract the videoTS of the sharer, then add our own\n    const leftVideo = this.getVideoEl();\n    const track = leftVideo?.textTracks[0];\n    let offset = leftVideo.currentTime - sharerTime;\n    if (track && track.cues && offset) {\n      for (let i = 0; i < track.cues.length; i++) {\n        let cue = track?.cues?.[i];\n        if (!cue) {\n          continue;\n        }\n        // console.log(cue.text, offset, (cue as any).origStart, (cue as any).origEnd);\n        if (!(cue as any).origStart) {\n          (cue as any).origStart = cue.startTime;\n          (cue as any).origEnd = cue.endTime;\n        }\n        cue.startTime = (cue as any).origStart + offset;\n        cue.endTime = (cue as any).origEnd + offset;\n      }\n    }\n  };\n\n  getTimeRanges = (): { start: number; end: number }[] => {\n    const leftVideo = this.getVideoEl();\n    const buffers = [];\n    const rangeCount = leftVideo?.buffered.length;\n    for (let i = 0; i < rangeCount; i++) {\n      const start = leftVideo?.buffered.start(i);\n      const end = leftVideo?.buffered.end(i);\n      buffers.push({ start, end });\n    }\n    return buffers;\n  };\n\n  setLoop = (loop: boolean): void => {\n    const leftVideo = this.getVideoEl();\n    leftVideo.loop = loop;\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}